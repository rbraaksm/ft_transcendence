import { Observable } from '../Observable';
<<<<<<< HEAD
import { Subscription } from '../Subscription';
=======
import { executeSchedule } from '../util/executeSchedule';
>>>>>>> rene
export function scheduleAsyncIterable(input, scheduler) {
    if (!input) {
        throw new Error('Iterable cannot be null');
    }
<<<<<<< HEAD
    return new Observable(subscriber => {
        const sub = new Subscription();
        sub.add(scheduler.schedule(() => {
            const iterator = input[Symbol.asyncIterator]();
            sub.add(scheduler.schedule(function () {
                iterator.next().then(result => {
=======
    return new Observable((subscriber) => {
        executeSchedule(subscriber, scheduler, () => {
            const iterator = input[Symbol.asyncIterator]();
            executeSchedule(subscriber, scheduler, () => {
                iterator.next().then((result) => {
>>>>>>> rene
                    if (result.done) {
                        subscriber.complete();
                    }
                    else {
                        subscriber.next(result.value);
<<<<<<< HEAD
                        this.schedule();
                    }
                });
            }));
        }));
        return sub;
=======
                    }
                });
            }, 0, true);
        });
>>>>>>> rene
    });
}
//# sourceMappingURL=scheduleAsyncIterable.js.map