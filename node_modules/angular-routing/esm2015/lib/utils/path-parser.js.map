{"version":3,"file":"path-parser.js","sourceRoot":"ng://angular-routing/","sources":["lib/utils/path-parser.ts"],"names":[],"mappings":"AAGA,MAAM,YAAY,GAAG,GAAG,CAAC;AAOzB,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,IAAI;AACvB,MAAM,SAAS,GAAG,MAAM,GAAG,iBAAiB,CAAC,CAAC,mGAAmG;AACjJ,MAAM,QAAQ,GAAG,WAAW,CAAC,CAAC,sBAAsB;AACpD,MAAM,GAAG,GAAG,MAAM,CAAC,CAAC,cAAc;AAClC,MAAM,SAAS,GAAG,GAAG,QAAQ,IAAI,CAAC,CAAC,oCAAoC;AACvE,MAAM,QAAQ,GAAG,MAAM,QAAQ,MAAM,GAAG,KAAK,CAAC,CAAC,4CAA4C;AAC3F,MAAM,aAAa,GAAG,GAAG,QAAQ,MAAM,QAAQ,IAAI,GAAG,GAAG,CAAC,CAAC,6CAA6C;AAExG,MAAM,UAAU,eAAe,CAAC,KAAY;IAC1C,MAAM,aAAa,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC3E,OAAO,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACvD,CAAC;AAED,MAAM,CAAC,MAAM,SAAS,GAAG,CAAC,KAAY,EAAU,EAAE;;IAChD,MAAM,QAAQ,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;IACxC,MAAM,SAAS,GAAG,QAAQ,CAAC,MAAM,CAC/B,CAAC,GAAG,EAAE,OAAO,EAAE,EAAE,CACf,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC;QAC9B,CAAC,CAAC,GAAG,GAAG,GAAG,SAAS,EAAE;QACtB,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,OAAO,EAAE,EAC9B,EAAE,CACH,CAAC;IAEF,UAAI,KAAK,CAAC,OAAO,CAAC,KAAK,mCAAI,IAAI,EAAE;QAC/B,OAAO,IAAI,MAAM,CAAC,IAAI,SAAS,GAAG,SAAS,EAAE,EAAE,GAAG,CAAC,CAAC;KACrD;SAAM;QACL,OAAO,IAAI,MAAM,CACf,IAAI,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,EAAE,EACtD,GAAG,CACJ,CAAC;KACH;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CACxB,GAAW,EACX,KAAY,EACY,EAAE;;IAC1B,MAAM,KAAK,SAAG,KAAK,CAAC,OAAO,0CAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACvC,IAAI,CAAC,KAAK,EAAE;QACV,OAAO;KACR;IACD,MAAM,IAAI,GAAG,eAAe,CAAC,KAAK,CAAC;SAChC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;SACzC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAE1B,OAAO;QACL,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;QACd,MAAM,EAAE,IAAI,CAAC,MAAM,CACjB,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,CAAC,iCAAM,GAAG,KAAE,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAG,EAC1D,EAAE,CACH;KACF,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { Route } from '../route';\nimport { Params } from '../route-params.service';\n\nconst PARAM_PREFIX = ':';\n\nexport interface RouteMatch {\n  path: string;\n  params: Params;\n}\n\nconst DIV = '\\\\/'; // /\nconst DIV_PARAM = `(?:${DIV}([^\\\\/#\\\\?]+?))`; // capturing group for one or more of not (/, # or ?), optional (TODO: check if optional is needed)\nconst PATH_END = '[\\\\/#\\\\?]'; // path end: /, # or ?\nconst END = '[]|$'; // null or end\nconst EXACT_END = `${PATH_END}?$`; // match PATH_END optionally and END\nconst WILDCARD = `(?:${PATH_END}(?=${END}))?`; // match optionally PATH_END followed by END\nconst NON_EXACT_END = `${WILDCARD}(?=${PATH_END}|${END})`; // match WILDCARD followed by PATH_END or END\n\nexport function getPathSegments(route: Route): string[] {\n  const sanitizedPath = route.path.replace(/^\\//, '').replace(/(?:\\/$)/, '');\n  return sanitizedPath ? sanitizedPath.split('/') : [];\n}\n\nexport const parsePath = (route: Route): RegExp => {\n  const segments = getPathSegments(route);\n  const regexBody = segments.reduce(\n    (acc, segment) =>\n      segment.startsWith(PARAM_PREFIX)\n        ? `${acc}${DIV_PARAM}`\n        : `${acc}${DIV}${segment}`,\n    ''\n  );\n\n  if (route.options.exact ?? true) {\n    return new RegExp(`^${regexBody}${EXACT_END}`, 'i');\n  } else {\n    return new RegExp(\n      `^${regexBody}${regexBody ? NON_EXACT_END : WILDCARD}`,\n      'i'\n    );\n  }\n};\n\nexport const matchRoute = (\n  url: string,\n  route: Route\n): RouteMatch | undefined => {\n  const match = route.matcher?.exec(url);\n  if (!match) {\n    return;\n  }\n  const keys = getPathSegments(route)\n    .filter((s) => s.startsWith(PARAM_PREFIX))\n    .map((s) => s.slice(1));\n\n  return {\n    path: match[0],\n    params: keys.reduce(\n      (acc, key, index) => ({ ...acc, [key]: match[index + 1] }),\n      {}\n    ),\n  };\n};\n"]}